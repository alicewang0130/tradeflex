# TradeFlex ä½¿ç”¨è¯´æ˜ä¹¦ ğŸ“–

## ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [åŠŸèƒ½è¯´æ˜](#åŠŸèƒ½è¯´æ˜)
4. [ç®¡ç†å‘˜æŒ‡å—](#ç®¡ç†å‘˜æŒ‡å—)
5. [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
6. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®ç®€ä»‹

TradeFlex æ˜¯ä¸€ä¸ªäº¤æ˜“æˆ˜æŠ¥ç”Ÿæˆä¸åˆ†äº«å¹³å°ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥è‡ªå·±çš„äº¤æ˜“ä¿¡æ¯ï¼ˆè‚¡ç¥¨ã€æœŸæƒï¼‰ï¼Œç”Ÿæˆç²¾ç¾çš„æˆ˜æŠ¥æµ·æŠ¥å›¾ç‰‡å¹¶ä¸‹è½½åˆ†äº«ã€‚

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ğŸš€ äº¤æ˜“æˆ˜æŠ¥æµ·æŠ¥ç”Ÿæˆï¼ˆæ”¯æŒæ­£è‚¡å’ŒæœŸæƒï¼‰
- ğŸ”® æ¯æ—¥å¸‚åœºæƒ…ç»ªæŠ•ç¥¨ï¼ˆOracle çœ‹æ¶¨/çœ‹è·Œï¼‰
- ğŸ† æ’è¡Œæ¦œï¼ˆèµ¢å®¶æ¦œ / æƒ¨æ¡ˆæ¦œï¼‰
- ğŸ‘¤ ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼ˆSupabase Authï¼‰
- ğŸŒ ä¸­è‹±æ–‡åŒè¯­æ”¯æŒï¼ˆè‡ªåŠ¨è®°å¿†è¯­è¨€åå¥½ï¼‰
- ğŸ›¡ï¸ ç®¡ç†å‘˜åå°ï¼ˆç»Ÿè®¡ã€ç”¨æˆ·ç®¡ç†ã€å°ç¦ï¼‰

**æŠ€æœ¯æ ˆï¼š**
- Next.js 16 + React 19
- TypeScript
- Tailwind CSS 4
- Supabaseï¼ˆè®¤è¯ + æ•°æ®åº“ï¼‰

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd TradeFlex-Web
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„Supabaseé¡¹ç›®URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„SupabaseåŒ¿åKey
```

> åœ¨ [Supabase Dashboard](https://supabase.com/dashboard) â†’ é¡¹ç›® Settings â†’ API ä¸­è·å–

### 3. åˆå§‹åŒ–æ•°æ®åº“

åœ¨ Supabase Dashboard â†’ **SQL Editor** ä¸­ï¼Œè¿è¡Œ `app/lib/schema.sql` ä¸­çš„å…¨éƒ¨ SQLã€‚

è¿™ä¼šåˆ›å»ºï¼š
- `profiles` è¡¨ â€” ç”¨æˆ·èµ„æ–™
- `flexes` è¡¨ â€” æˆ˜æŠ¥è®°å½•
- `oracle_votes` è¡¨ â€” æŠ•ç¥¨è®°å½•
- è‡ªåŠ¨è§¦å‘å™¨ â€” æ–°ç”¨æˆ·æ³¨å†Œæ—¶è‡ªåŠ¨åˆ›å»º profile

### 4. è®¾ç½®ç®¡ç†å‘˜

åœ¨ Supabase SQL Editor ä¸­è¿è¡Œï¼š

```sql
UPDATE public.profiles SET role = 'admin' WHERE email = 'ä½ çš„é‚®ç®±';
```

åŒæ—¶åœ¨ `app/lib/admin.ts` ä¸­æ·»åŠ ç®¡ç†å‘˜é‚®ç®±ï¼š

```typescript
const ADMIN_EMAILS = [
  'alice0130@gmail.com',  // åœ¨è¿™é‡Œæ·»åŠ ç®¡ç†å‘˜é‚®ç®±
];
```

### 5. å¯åŠ¨é¡¹ç›®

```bash
npm run dev
```

è®¿é—® `http://localhost:3000`

---

## åŠŸèƒ½è¯´æ˜

### ğŸ“Š äº¤æ˜“æˆ˜æŠ¥ç”Ÿæˆ

1. é€‰æ‹©**äº¤æ˜“å“ç§**ï¼šæ­£è‚¡ï¼ˆStockï¼‰æˆ–æœŸæƒï¼ˆOptionï¼‰
2. é€‰æ‹©**æŒä»“çŠ¶æ€**ï¼šæŒä»“ä¸­ï¼ˆOpenï¼‰æˆ–å·²å¹³ä»“ï¼ˆClosedï¼‰
3. è¾“å…¥**è‚¡ç¥¨ä»£ç **ï¼ˆå¦‚ TSLAã€AAPLï¼‰
4. é€‰æ‹©**æŒä»“æ–¹å‘**ï¼šåšå¤šï¼ˆLongï¼‰æˆ–åšç©ºï¼ˆShortï¼‰
5. å¦‚æœæ˜¯æœŸæƒï¼Œè¿˜éœ€å¡«å†™ï¼šè¡Œæƒä»·ã€ç±»å‹ï¼ˆCall/Putï¼‰ã€åˆ°æœŸæ—¥
6. è¾“å…¥**å¹³å‡æˆæœ¬**å’Œ**å½“å‰ä»·æ ¼/å–å‡ºä»·**
7. è¾“å…¥**æŒä»“æ•°é‡**ï¼ˆå¯é€‰ï¼Œç”¨äºè®¡ç®—ç›ˆäºé‡‘é¢ï¼‰
8. é€‰æ‹©**è‡ªå®šä¹‰è¡¨æƒ…**ï¼ˆå¯é€‰ï¼‰
9. ç‚¹å‡» **GENERATE IMAGE** ç”Ÿæˆå¹¶ä¸‹è½½æµ·æŠ¥å›¾ç‰‡

> ğŸ’¡ iPhone ç”¨æˆ·ï¼šç‚¹å‡»åä¼šä¸‹è½½å›¾ç‰‡ï¼Œé•¿æŒ‰å¯ä¿å­˜åˆ°ç›¸å†Œ

### ğŸ”® Oracle æ¯æ—¥æŠ•ç¥¨

- é¡µé¢é¡¶éƒ¨æœ‰çœ‹æ¶¨ï¼ˆğŸ‚ï¼‰å’Œçœ‹è·Œï¼ˆğŸ»ï¼‰æŠ•ç¥¨æŒ‰é’®
- æ¯äººæ¯å¤©åªèƒ½æŠ•ä¸€æ¬¡
- å®æ—¶æ˜¾ç¤ºæŠ•ç¥¨æ¯”ä¾‹
- ç™»å½•ç”¨æˆ·çš„æŠ•ç¥¨ä¼šä¿å­˜åˆ°æ•°æ®åº“

### ğŸ† æ’è¡Œæ¦œï¼ˆHall of Fameï¼‰

- **MOONERS ğŸš€** â€” ç›ˆåˆ©æœ€é«˜çš„äº¤æ˜“
- **REKT ğŸ’€** â€” äºæŸæœ€æƒ¨çš„äº¤æ˜“
- æ•°æ®æ¥è‡ªç”¨æˆ·ç”Ÿæˆçš„çœŸå®æˆ˜æŠ¥
- å¦‚æœè¿˜æ²¡æœ‰çœŸå®æ•°æ®ï¼Œä¼šæ˜¾ç¤ºç¤ºä¾‹æ•°æ®

### ğŸŒ è¯­è¨€åˆ‡æ¢

- ç‚¹å‡»å¯¼èˆªæ çš„å›½æ——å›¾æ ‡åˆ‡æ¢ä¸­è‹±æ–‡
- è¯­è¨€åå¥½ä¼šä¿å­˜åˆ°æœ¬åœ°å’Œç”¨æˆ·è´¦å·
- ç™»å½•åè‡ªåŠ¨æ¢å¤ä½ ä¹‹å‰é€‰æ‹©çš„è¯­è¨€

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ

- **æ³¨å†Œ**ï¼šç‚¹å‡» JOINï¼Œè¾“å…¥é‚®ç®±å’Œå¯†ç 
- **ç™»å½•**ï¼šç‚¹å‡» LOG INï¼Œè¾“å…¥é‚®ç®±å’Œå¯†ç 
- **ç™»å‡º**ï¼šç‚¹å‡»ç”¨æˆ·åæ—è¾¹çš„é€€å‡ºå›¾æ ‡
- ç™»å½•åä¼šæ˜¾ç¤ºç»¿è‰²çš„æ¬¢è¿æç¤ºï¼š
  - é¦–æ¬¡æ³¨å†Œï¼šğŸ‰ "æ¬¢è¿åŠ å…¥ TradeFlexï¼ä¸€èµ·åˆ›é€ å†å² ğŸ†"
  - å†æ¬¡ç™»å½•ï¼šğŸš€ "æ¬¢è¿å›æ¥ï¼å‡†å¤‡å¥½æ™’æˆ˜ç»©äº†å—ï¼Ÿ"

---

## ç®¡ç†å‘˜æŒ‡å—

### è¿›å…¥ç®¡ç†åå°

ç®¡ç†å‘˜ç™»å½•åï¼Œå¯¼èˆªæ ä¼šå‡ºç° **âš™ï¸ Manage** é“¾æ¥ï¼Œç‚¹å‡»è¿›å…¥ç®¡ç†é¢æ¿ã€‚

è·¯å¾„ï¼š`/admin`

> âš ï¸ éç®¡ç†å‘˜è®¿é—® `/admin` ä¼šè¢«è‡ªåŠ¨é‡å®šå‘åˆ°é¦–é¡µ

### ğŸ“Š ç»Ÿè®¡é¢æ¿ï¼ˆStatisticsï¼‰

æ˜¾ç¤ºå››é¡¹å®æ—¶æ•°æ®ï¼š
| æŒ‡æ ‡ | è¯´æ˜ |
|------|------|
| Total Users | æ³¨å†Œç”¨æˆ·æ€»æ•° |
| Flexes Generated | ç”Ÿæˆçš„æˆ˜æŠ¥æ€»æ•° |
| Flexes Today | ä»Šæ—¥ç”Ÿæˆçš„æˆ˜æŠ¥æ•° |
| Oracle Votes | æŠ•ç¥¨æ€»æ•° |

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†ï¼ˆUsersï¼‰

ç®¡ç†å‘˜å¯ä»¥å¯¹ç”¨æˆ·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

**è§’è‰²ç®¡ç†ï¼š**
- åœ¨ç”¨æˆ·è¡Œçš„ Role ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© `User` æˆ– `Admin`
- ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ

**å°ç¦/è§£å°ï¼š**
- ç‚¹å‡» **Ban** æŒ‰é’®å°ç¦ç”¨æˆ·
- å°ç¦åç”¨æˆ·æ— æ³•ç™»å½•ï¼Œå·²ç™»å½•çš„ä¼šè¢«å¼ºåˆ¶ç™»å‡º
- ç‚¹å‡» **Unban** è§£é™¤å°ç¦

---

## æ•°æ®åº“é…ç½®

### æ•°æ®è¡¨ç»“æ„

#### profilesï¼ˆç”¨æˆ·èµ„æ–™ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | UUID | ä¸»é”®ï¼Œå…³è” auth.users |
| email | TEXT | é‚®ç®± |
| display_name | TEXT | æ˜¾ç¤ºåç§° |
| role | TEXT | è§’è‰²ï¼ˆuser / adminï¼‰ |
| banned | BOOLEAN | æ˜¯å¦è¢«å°ç¦ |
| created_at | TIMESTAMPTZ | åˆ›å»ºæ—¶é—´ |

#### flexesï¼ˆæˆ˜æŠ¥è®°å½•ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | UUID | ä¸»é”® |
| user_id | UUID | ç”¨æˆ·ID |
| ticker | TEXT | è‚¡ç¥¨ä»£ç  |
| instrument | TEXT | å“ç§ï¼ˆSTOCK / OPTIONï¼‰ |
| position_type | TEXT | æ–¹å‘ï¼ˆLONG / SHORTï¼‰ |
| pnl_percent | NUMERIC | ç›ˆäºç™¾åˆ†æ¯” |
| pnl_amount | NUMERIC | ç›ˆäºé‡‘é¢ |
| created_at | TIMESTAMPTZ | åˆ›å»ºæ—¶é—´ |

#### oracle_votesï¼ˆæŠ•ç¥¨è®°å½•ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | UUID | ä¸»é”® |
| user_id | UUID | ç”¨æˆ·ID |
| vote | TEXT | æŠ•ç¥¨ï¼ˆbull / bearï¼‰ |
| voted_at | DATE | æŠ•ç¥¨æ—¥æœŸ |
| created_at | TIMESTAMPTZ | åˆ›å»ºæ—¶é—´ |

### RLS ç­–ç•¥

æ‰€æœ‰è¡¨éƒ½å¯ç”¨äº†è¡Œçº§å®‰å…¨ç­–ç•¥ï¼ˆRow Level Securityï¼‰ï¼š
- `profiles` â€” æ‰€æœ‰äººå¯è¯»ï¼Œç”¨æˆ·å¯æ”¹è‡ªå·±çš„ï¼Œç®¡ç†å‘˜å¯æ”¹æ‰€æœ‰äººçš„
- `flexes` â€” æ‰€æœ‰äººå¯è¯»ï¼ˆæ’è¡Œæ¦œéœ€è¦ï¼‰ï¼Œç™»å½•ç”¨æˆ·å¯æ’å…¥è‡ªå·±çš„
- `oracle_votes` â€” æ‰€æœ‰äººå¯è¯»ï¼Œç™»å½•ç”¨æˆ·å¯æ’å…¥è‡ªå·±çš„ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰

---

## é¡¹ç›®ç»“æ„

```
TradeFlex-Web/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # é¦–é¡µï¼ˆæˆ˜æŠ¥ç”Ÿæˆ + Oracle + æ’è¡Œæ¦œï¼‰
â”‚   â”œâ”€â”€ layout.tsx            # å…¨å±€å¸ƒå±€
â”‚   â”œâ”€â”€ supabase.ts           # Supabase å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx          # ç™»å½•/æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ page.tsx          # ç®¡ç†å‘˜åå°
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ callback/
â”‚   â”‚       â””â”€â”€ route.ts      # OAuth å›è°ƒå¤„ç†
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ stats/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts  # ç»Ÿè®¡æ•°æ® API
â”‚   â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚   â”‚       â”œâ”€â”€ route.ts  # ç”¨æˆ·åˆ—è¡¨ API
â”‚   â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚   â”‚           â””â”€â”€ route.ts  # ç”¨æˆ·æ›´æ–° API
â”‚   â”‚   â””â”€â”€ leaderboard/
â”‚   â”‚       â””â”€â”€ route.ts      # æ’è¡Œæ¦œ API
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ admin.ts          # ç®¡ç†å‘˜é‚®ç®±ç™½åå•
â”‚       â””â”€â”€ schema.sql        # æ•°æ®åº“å»ºè¡¨ SQL
â”œâ”€â”€ .env.local                # ç¯å¢ƒå˜é‡ï¼ˆä¸è¦æäº¤åˆ° Gitï¼ï¼‰
â”œâ”€â”€ package.json
â””â”€â”€ README_CN.md              # æœ¬è¯´æ˜ä¹¦
```

---

## å¸¸è§é—®é¢˜

### Q: ç™»å½•æ—¶æŠ¥é”™ "Invalid login credentials"
ç¡®è®¤é‚®ç®±å’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ˜¯æ–°æ³¨å†Œçš„ç”¨æˆ·ï¼Œæ£€æŸ¥é‚®ç®±æ˜¯å¦æ”¶åˆ°äº†ç¡®è®¤é“¾æ¥ï¼ˆéœ€è¦å…ˆç¡®è®¤é‚®ç®±ï¼‰ã€‚

### Q: æ³¨å†Œåæ²¡æ”¶åˆ°ç¡®è®¤é‚®ä»¶
åœ¨ Supabase Dashboard â†’ Authentication â†’ Settings ä¸­ï¼Œå¯ä»¥å…³é—­ "Confirm email" é€‰é¡¹ï¼ˆå¼€å‘é˜¶æ®µæ–¹ä¾¿æµ‹è¯•ï¼‰ã€‚

### Q: ç®¡ç†å‘˜çœ‹ä¸åˆ° Manage æŒ‰é’®
ç¡®è®¤ä¸¤ä»¶äº‹ï¼š
1. `app/lib/admin.ts` ä¸­å·²æ·»åŠ ä½ çš„é‚®ç®±
2. `profiles` è¡¨ä¸­ä½ çš„ `role` å­—æ®µå·²è®¾ä¸º `admin`

### Q: Ban äº†ç”¨æˆ·ä½†åˆ·æ–°åæ¢å¤äº†
ç¡®è®¤å·²åœ¨ Supabase SQL Editor ä¸­è¿è¡Œäº†ç®¡ç†å‘˜ RLS ç­–ç•¥ï¼š
```sql
CREATE POLICY "Admins can update all profiles"
  ON public.profiles FOR UPDATE
  USING (
    EXISTS (
      SELECT 1 FROM public.profiles
      WHERE id = auth.uid() AND role = 'admin'
    )
  );
```

### Q: æ’è¡Œæ¦œä¸€ç›´æ˜¾ç¤ºç¤ºä¾‹æ•°æ®
éœ€è¦æœ‰ç™»å½•ç”¨æˆ·ç”Ÿæˆè¿‡æˆ˜æŠ¥ï¼ˆç‚¹å‡» Generate Imageï¼‰ï¼ŒçœŸå®æ•°æ®æ‰ä¼šå‡ºç°åœ¨æ’è¡Œæ¦œä¸­ã€‚

### Q: Generate Image ç‚¹äº†æ²¡ååº”
ç¡®è®¤æµè§ˆå™¨æ²¡æœ‰æ‹¦æˆªå¼¹çª—/ä¸‹è½½ã€‚åœ¨ Safari ä¸­å¯èƒ½éœ€è¦å…è®¸ä¸‹è½½æƒé™ã€‚

---

> ğŸ“… æœ€åæ›´æ–°ï¼š2026-02-14
> ğŸ´ ç”± MiniHorse ç¼–å†™
